import{_ as e,c as a,o as i,a2 as n}from"./chunks/framework.CQECOx-R.js";const c=JSON.parse('{"title":"Linux私钥登陆提示server refused our key","description":"","frontmatter":{},"headers":[],"relativePath":"linux/env/Linux私钥登陆提示server refused our key.md","filePath":"linux/env/Linux私钥登陆提示server refused our key.md","lastUpdated":1746516944000}'),t={name:"linux/env/Linux私钥登陆提示server refused our key.md"};function r(l,s,h,p,o,d){return i(),a("div",null,s[0]||(s[0]=[n(`<h1 id="linux私钥登陆提示server-refused-our-key" tabindex="-1">Linux私钥登陆提示server refused our key <a class="header-anchor" href="#linux私钥登陆提示server-refused-our-key" aria-label="Permalink to &quot;Linux私钥登陆提示server refused our key&quot;">​</a></h1><h2 id="背景" tabindex="-1">背景 <a class="header-anchor" href="#背景" aria-label="Permalink to &quot;背景&quot;">​</a></h2><p>家庭内网装了个物理机的Ubuntu server，用的最新版本的22.04，然后用windows端的mobaxterm和navicat使用ssh私钥连接内网服务器时返回了<code>Server refused our key</code>的异常</p><h2 id="问题原因" tabindex="-1">问题原因 <a class="header-anchor" href="#问题原因" aria-label="Permalink to &quot;问题原因&quot;">​</a></h2><p><code>openssh 8.8</code>开始默认禁用了使用<code>SHA-1</code>哈希算法的<code>RSA</code>签名,看了一下ubuntu server 22.04的默认openssh版本：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">➜</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  ~</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ssh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -V</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">OpenSSH_8.9p1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Ubuntu-3,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> OpenSSL</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3.0.2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 15</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Mar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2022</span></span></code></pre></div><blockquote><p><a href="https://www.openssh.com/txt/release-8.8" target="_blank" rel="noreferrer">https://www.openssh.com/txt/release-8.8</a></p><p>This release disables RSA signatures using the SHA-1 hash algorithm by default. This change has been made as the SHA-1 hash algorithm is cryptographically broken, and it is possible to create chosen-prefix hash collisions for &lt;USD$50K [1]</p></blockquote><h2 id="解决方案" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案" aria-label="Permalink to &quot;解决方案&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/ssh/sshd_config</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 添加配置</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PubkeyAcceptedKeyTypes</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +ssh-rsa</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sshd</span></span></code></pre></div>`,9)]))}const u=e(t,[["render",r]]);export{c as __pageData,u as default};
