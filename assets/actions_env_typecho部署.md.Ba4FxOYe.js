import{_ as i,c as a,o as h,a2 as p}from"./chunks/framework.CQECOx-R.js";const c=JSON.parse('{"title":"typecho部署","description":"","frontmatter":{},"headers":[],"relativePath":"actions/env/typecho部署.md","filePath":"actions/env/typecho部署.md","lastUpdated":1746516944000}'),n={name:"actions/env/typecho部署.md"};function t(l,s,e,k,r,d){return h(),a("div",null,s[0]||(s[0]=[p(`<h1 id="typecho部署" tabindex="-1">typecho部署 <a class="header-anchor" href="#typecho部署" aria-label="Permalink to &quot;typecho部署&quot;">​</a></h1><h2 id="服务器环境" tabindex="-1">服务器环境 <a class="header-anchor" href="#服务器环境" aria-label="Permalink to &quot;服务器环境&quot;">​</a></h2><h3 id="安装php" tabindex="-1">安装php <a class="header-anchor" href="#安装php" aria-label="Permalink to &quot;安装php&quot;">​</a></h3><h4 id="debian" tabindex="-1">debian <a class="header-anchor" href="#debian" aria-label="Permalink to &quot;debian&quot;">​</a></h4><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php7.4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php7.4-fpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php7.4-mysql</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php7.4-curl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php7.4-gd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php7.4-mbstring</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php7.4-xml</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php7.4-xmlrpc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php7.4-zip</span></span></code></pre></div><h4 id="ubuntu-server" tabindex="-1">ubuntu-server <a class="header-anchor" href="#ubuntu-server" aria-label="Permalink to &quot;ubuntu-server&quot;">​</a></h4><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add-apt-repository</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ppa:ondrej/php</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php7.4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php7.4-mysql</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php7.4-curl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php7.4-json</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php7.4-cgi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php7.4-gd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php7.4-cli</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php7.4-fpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php7.4-mbstring</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php7.4-xml</span></span></code></pre></div><h3 id="修改监听端口" tabindex="-1">修改监听端口 <a class="header-anchor" href="#修改监听端口" aria-label="Permalink to &quot;修改监听端口&quot;">​</a></h3><p><code>vim /etc/php/7.4/fpm/pool.d/www.conf</code></p><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>; listen = /run/php/php7.4-fpm.sock</span></span>
<span class="line"><span>listen = 127.0.0.1:9000;</span></span></code></pre></div><p><code>systemctl restart php7.4-fpm</code></p><h3 id="nginx配置" tabindex="-1">nginx配置 <a class="header-anchor" href="#nginx配置" aria-label="Permalink to &quot;nginx配置&quot;">​</a></h3><div class="language-nginx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">root </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/var/www/typecho</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">location </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> .*</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">\\.php(\\/.*)*$ </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      fastcgi_pass 127.0.0.1:9000;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      fastcgi_split_path_info </span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">^(.+?.php)(/.*)$</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      fastcgi_index </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">index.php;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      fastcgi_param </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SCRIPT_FILENAME $document_root$fastcgi_script_name;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      include </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fastcgi_params;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="mysql创建数据库和用户" tabindex="-1">mysql创建数据库和用户 <a class="header-anchor" href="#mysql创建数据库和用户" aria-label="Permalink to &quot;mysql创建数据库和用户&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">create</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> database</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> typecho</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> USER</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">typecho_user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&#39;@</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;localhost&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> IDENTIFIED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;your_password&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">GRANT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ALL PRIVILEGES </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typecho.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TO</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;typecho_user&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;localhost&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">FLUSH PRIVILEGES;</span></span></code></pre></div><h3 id="文件系统权限" tabindex="-1">文件系统权限 <a class="header-anchor" href="#文件系统权限" aria-label="Permalink to &quot;文件系统权限&quot;">​</a></h3><p><code>chmod -R 755 /var/www/typecho</code></p>`,17)]))}const E=i(n,[["render",t]]);export{c as __pageData,E as default};
